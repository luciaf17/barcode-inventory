<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ingresar datos de producto</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body class="formularios">
    <div class="form-container">
        <button onclick="window.location.href='/'" style="margin: 10px; padding: 8px 16px; font-size: 1em; cursor: pointer;">
            Volver al Inicio
        </button>
        <h1>Ingresar datos de producto</h1>
        <form id="data-form">
            <label for="descripcion">Descripción:</label>
            <input type="text" id="descripcion" name="descripcion" placeholder="Ingrese la descripción" required>

            <label for="cantidad">Cantidad:</label>
            <input type="number" id="cantidad" name="cantidad" required>

            <label for="deposito">Depósito:</label>
            <select id="deposito" name="deposito" required>
                {% for deposito in depositos %}
                    <option value="{{ deposito }}" {% if loop.first %}selected{% endif %}>{{ deposito }}</option>
                {% endfor %}
            </select>

            <label for="pasillo">Pasillo:</label>
            <select id="pasillo" name="pasillo" required>
                {% for pasillo in pasillos %}
                    <option value="{{ pasillo }}" {% if loop.first %}selected{% endif %}>{{ pasillo }}</option>
                {% endfor %}
            </select>

            <label for="columna">Columna:</label>
            <select id="columna" name="columna" required>
                {% for columna in columnas %}
                    <option value="{{ columna }}" {% if loop.first %}selected{% endif %}>{{ columna }}</option>
                {% endfor %}
            </select>

            <label for="estante">Estante:</label>
            <select id="estante" name="estante" required>
                {% for estante in estantes %}
                    <option value="{{ estante }}" {% if loop.first %}selected{% endif %}>{{ estante }}</option>
                {% endfor %}
            </select>

            <button type="submit" class="submit-button">Enviar</button>
        </form>

        <div id="message-container"></div>
    </div>

    <script>
        document.getElementById('data-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const descripcion = document.getElementById("descripcion").value;
            const cantidad = document.getElementById("cantidad").value;
            const deposito = document.getElementById("deposito").value;
            const pasillo = document.getElementById("pasillo").value;
            const columna = document.getElementById("columna").value;
            const estante = document.getElementById("estante").value;
            const messageContainer = document.getElementById("message-container");
    
            fetch('/agregar_manual', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ descripcion, cantidad, deposito, pasillo, columna, estante })
            })
            .then(response => response.json())
            .then(data => {
                messageContainer.classList.remove("success", "error");
                if (data.error) {
                    messageContainer.classList.add("error");
                    messageContainer.innerText = data.error;
                } else {
                    messageContainer.classList.add("success");
                    messageContainer.innerText = data.message;
                }
            })
            .catch(error => {
                console.error("Error:", error);
                messageContainer.classList.add("error");
                messageContainer.innerText = "Hubo un error al enviar los datos.";
            });
        });
    </script>
</body>
</html>
